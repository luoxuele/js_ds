<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>
    //监听一个输入框，文字变化后触发change事件
    //直接用keyup事件，则会频繁触发change事件
    //防抖：用户输入结束或暂停时，才会触发change事件

</script>

<input type="text" id="input1">

<!--<script>-->
<!--    const input1 = document.getElementById("input1");-->
<!--    input1.addEventListener("keyup",function (ev) {-->
<!--        console.log(input1.value);-->
<!--    })-->
<!--</script>-->

<script>
    // const input1 = document.getElementById("input1");
    // let timer = null;
    // input1.addEventListener("keyup",function (ev) {
    //
    //     if(timer){
    //         clearTimeout(timer)
    //     }
    //     timer = setTimeout(()=>{
    //         console.log(input1.value);
    //
    //         //清空定时器
    //         timer = null;
    //     },500)
    //
    //
    // })
</script>

<script>
    //防抖函数debounce

    function debounce(fn,delay = 500){
        let timer = null; //timer是闭包中的

        return function(){
            if(timer){
                clearTimeout(timer)
            }

            timer = setTimeout(()=>{
                fn.apply(this,arguments)
                timer = null
            }, delay)

        }
    }

    input1.addEventListener('keyup',debounce(()=>{
        console.log(input1.value);
    }))

</script>

</body>
</html>